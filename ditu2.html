<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html style="height:100%; margin: 0px;" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=57AKvs4UX1QPGytTfizj1Xn9"></script>


<link href="css/style.css" rel="stylesheet" type="text/css" />
</head>

<body style="height:100%; margin: 0px;">
 <div style="width:100%; height:100%;"><div id="l-map"></div></div>
<script type="text/javascript" src="js/data.js"></script>

		<script type="text/javascript">

	    var map = new BMap.Map("l-map");

	    var point = new BMap.Point(116.400244, 39.92556);

	    map.centerAndZoom(point, 12);

	    map.addControl(new BMap.NavigationControl());

	    map.addControl(new BMap.ScaleControl());

	    map.addControl(new BMap.MapTypeControl());

	    map.enableScrollWheelZoom(true);

		var polyline = new BMap.Polyline([
		new BMap.Point(116.385871, 39.955059),
		new BMap.Point(116.436734, 39.95575),
		new BMap.Point(116.438925, 39.955197),
		
				new BMap.Point(116.440264, 39.953427),
		new BMap.Point(116.441548, 39.920012),
		new BMap.Point(116.442141, 39.916927),
				new BMap.Point(116.44277, 39.907588),
		new BMap.Point(116.444782, 39.905623),
		new BMap.Point(116.450603, 39.903714),
		new BMap.Point(116.452813, 39.884186),
		new BMap.Point(116.450549, 39.877763),
		new BMap.Point(116.447926, 39.876296),
		new BMap.Point(116.424391, 39.877293),
		new BMap.Point(116.421265, 39.878539),
		new BMap.Point(116.390291, 39.877348),
		new BMap.Point(116.373223, 39.875549),
		new BMap.Point(116.365103, 39.874164),
		new BMap.Point(116.357198, 39.874386),
		new BMap.Point(116.355329, 39.876241),
		new BMap.Point(116.355976, 39.881307),
		new BMap.Point(116.355221, 39.902344),
		new BMap.Point(116.356946, 39.903838),
		new BMap.Point(116.362551, 39.904641),
		new BMap.Point(116.36336, 39.905969),
		new BMap.Point(116.363216, 39.917923),
		new BMap.Point(116.362048, 39.948297),
		new BMap.Point(116.364258, 39.950164),
		new BMap.Point(116.378865, 39.954658),
		new BMap.Point(116.385898, 39.955073)
		
		
	], {strokeColor:"red", strokeWeight:3, strokeOpacity:0.0});
	map.addOverlay(polyline);          //增加折线
	
	var polyline = new BMap.Polyline([
		new BMap.Point(116.468336,39.914022),
		new BMap.Point(116.441495,39.914506),
		new BMap.Point(116.424382,39.914402),
		new BMap.Point(116.398035,39.913752),
		new BMap.Point(116.363019,39.912929),
		new BMap.Point(116.316801,39.91351)
	], {strokeColor:"red", strokeWeight:5, strokeOpacity:0.0});
	map.addOverlay(polyline);          //增加折线
	
	var polyline = new BMap.Polyline([
		new BMap.Point(116.412686,39.930619),
		new BMap.Point(116.41318,39.919327),
		new BMap.Point(116.413072,39.914291)
	], {strokeColor:"red", strokeWeight:5, strokeOpacity:0.0});
	map.addOverlay(polyline);          //增加折线
	
	var polyline = new BMap.Polyline([
		new BMap.Point(116.409717,39.914188),
		new BMap.Point(116.408909,39.929796)
	], {strokeColor:"red", strokeWeight:5, strokeOpacity:0.0});
	map.addOverlay(polyline);          //增加折线

var polyline = new BMap.Polyline([
		new BMap.Point(116.413054,39.914184),
		new BMap.Point(116.413198,39.907121)
	], {strokeColor:"red", strokeWeight:5, strokeOpacity:0.0});
	map.addOverlay(polyline);          //增加折线
	
	var polyline = new BMap.Polyline([
		new BMap.Point(116.41786,39.914267),
		new BMap.Point(116.418157,39.907253)
	], {strokeColor:"red", strokeWeight:5, strokeOpacity:0.0});
	map.addOverlay(polyline);          //增加折线
	
	
		var polyline = new BMap.Polyline([
		new BMap.Point(116.405746,39.914039),
		new BMap.Point(116.406097,39.906671)
	], {strokeColor:"red", strokeWeight:5, strokeOpacity:0.0});
	map.addOverlay(polyline);          //增加折线
	
	
	var polyline = new BMap.Polyline([
		new BMap.Point(116.402504,39.906464),
		new BMap.Point(116.402072,39.913894)
	], {strokeColor:"red", strokeWeight:5, strokeOpacity:0.0});
	map.addOverlay(polyline);          //增加折线
	
	
	
		var polyline = new BMap.Polyline([
		new BMap.Point(116.398066,39.913756),
		new BMap.Point(116.398255,39.909709),
		new BMap.Point(116.398048,39.909349),
		new BMap.Point(116.398174,39.906734)
	], {strokeColor:"red", strokeWeight:5, strokeOpacity:0.0});
	map.addOverlay(polyline);          //增加折线
	
	
	var polyline = new BMap.Polyline([
		new BMap.Point(116.398264,39.909705),
		new BMap.Point(116.399485,39.909152),
		new BMap.Point(116.40236,39.909248)
	], {strokeColor:"red", strokeWeight:5, strokeOpacity:0.0});
	map.addOverlay(polyline);          //增加折线
	
	// 添加点击事件侦听
function addClickHandler(marker, title, content) {
    marker.addEventListener("click", function (e) {
            displayInfo(title, content, e)
        }
    );
}
	

	    if (typeof(points) != 'undefined')

	    {

		// 在地图中输出坐标点
		

		for (var i = 0, n = points.length; i < n; i++)

		{

		    var point = new BMap.Point(points[i].pointx, points[i].pointy);

		    addMarker(point, points[i].pathname);

		}

	    }

	    // 添加覆盖物
		

	    function addMarker(point, title,content)

	    {

		var marker = new BMap.Marker(point);

		var label = new BMap.Label(title, {offset: new BMap.Size(20, -10)});
label.setStyle({ display:"none"});

 if (points[i].biaozhu == "1") {
                marker = new BMap.Marker(point, { icon: new BMap.Icon("3.png", new BMap.Size(20, 25)),offset: new BMap.Size(0, -10) }); //创建对象
				
            } else {
                marker = new BMap.Marker(point , { icon: new BMap.Icon("5.png", new BMap.Size(20, 25)),offset: new BMap.Size(0, -10) });
            }

		marker.setLabel(label);
		marker.addEventListener("mouseover", function(){  
    label.setStyle({    //给label设置样式，任意的CSS都是可以的
        display:"block"
    });
         
}); 
 
marker.addEventListener("mouseout", function(){ 
    label.setStyle({    //给label设置样式，任意的CSS都是可以的
        display:"none"
    }); 
});
		
		map.addOverlay(marker);
	
var opts = {title : points[i].title};



	
	var infoWindow =new BMap.InfoWindow(points[i].pathname + '<br /><a href="' + points[i].id + '"\" target=\"_blank\"" style="font-size:12px; color:#FFFFFF; background:#FF0000; padding:3px;">查看街景</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="51jiucuo.html?id=' + points[i].pathname + '&x=' + points[i].pointx + '&y=' + points[i].pointy + '"\" target=\"_blank\""    style="font-size:12px; color:#FFFFFF; background:#0099FF; padding:3px;" >我要纠错</a>', opts);  // 创建信息窗口对象，引号里可以书写任意的html语句。
	
	
	
	marker.addEventListener("click", function(){          
		map.openInfoWindow(infoWindow,point); //开启信息窗口
	});
	    }

	    // 显示坐标

	    function showPoint(e)

	    {

		console.log(e.point.lng + ", " + e.point.lat);

	    }

	    map.addEventListener("click", showPoint);

var ctrl = new BMapLib.TrafficControl({

		showPanel: false //是否显示路况提示面板

	});      

	map.addControl(ctrl);

	ctrl.setAnchor(BMAP_ANCHOR_BOTTOM_RIGHT);

	    // 提交坐标

	    $("#submit-button").bind("click", function() {

	    });

	</script>
</body>
</html>
